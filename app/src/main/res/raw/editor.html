<!--
  ~ MIT License
  ~
  ~ Copyright (c) 2017 Kabuku Inc.
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in all
  ~ copies or substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  ~ SOFTWARE.
  ~
  -->

<html>
    <head>
        <title>Motion editor</title>
        <meta charset=UTF-8>
        <meta
                name=viewport
                content=width=device-width>
        <style type=text/css>
body {
margin: 0px;
backgound-color: #FFFFFF;
font-family: helvetica, arial;
font-size: 100%;
color: #555555;
}
td {
text-align: center;
}
span {
font-family: helvetica, arial;
font-size: 70%;
color: #777777;
}
input[type=range] {
-webkit-appearance: none;
background-color: #CCCCCC;
width: 70%;
height: 20px;
}
input[type=range]::-webkit-slider-thumb {
-webkit-appearance: none;
background-color: #4DA6FF;
opacity: 0.9;
width: 12px;
height: 20px;
}
input[type=text] {
width: 40%;
font-family: helvetica, arial;
font-size: 90%;
color: #555555;
text-align: center;
padding: 3px 3px 3px 3px;
}
button {
width: 40%;
font-family: helvetica, arial;
font-size: 90%;
color: #555555;
padding: 5px 5px 5px 5px;
border: none;
}




        </style>
    </head>
    <body onload='actionCode()'>
        <br>
        <table
                width=100%
                height=90%>
            <tr>
                <td width=50%>D16
                    <span>Default 110<br>⬇ 135
                        <input
                                type=range
                                id=range_4
                                min=45
                                max=135
                                value=110
                                style=direction:rtl
                                onchange=controlServo(4,'range_4')>
                        45 ⬆
                    </span>
                    <br>
                    <input
                            type=text
                            id=servo_4
                            value=110>
                    <button
                            type=button
                            style=background:#FFE599
                            onclick=controlServo(4,'servo_4')>Send
                    </button>
                </td>
                <td width=50%>D14
                    <span>Default 70<br>⬆ 135
                        <input
                                type=range
                                id=range_0
                                min=45
                                max=135
                                value=70
                                style=direction:rtl
                                onchange=controlServo(0,'range_0')>
                        45 ⬇
                    </span>
                    <br>
                    <input
                            type=text
                            id=servo_0
                            value=70>
                    <button
                            type=button
                            style=background:#FFE599
                            onclick=controlServo(0,'servo_0')>Send
                    </button>
                </td>
            </tr>
            <tr>
                <td colspan=4>
                    <span>
                        <br>
                    </span>
                </td>
            </tr>
            <tr>
                <td>D05
                    <span>Default 90<br>◀ 135
                        <input
                                type=range
                                id=range_5
                                min=45
                                max=135
                                value=90
                                style=direction:rtl
                                onchange=controlServo(5,'range_5')>
                        45 ▶
                    </span>
                    <br>
                    <input
                            type=text
                            id=servo_5
                            value=90>
                    <button
                            type=button
                            style=background:#BFDFFF
                            onclick=controlServo(5,'servo_5')>Send
                    </button>
                </td>
                <td>D12
                    <span>Default 90<br>◀ 135
                        <input
                                type=range
                                id=range_1
                                min=45
                                max=135
                                value=90
                                style=direction:rtl
                                onchange=controlServo(1,'range_1')>
                        45 ▶
                    </span>
                    <br>
                    <input
                            type=text
                            id=servo_1
                            value=90>
                    <button
                            type=button
                            style=background:#BFDFFF
                            onclick=controlServo(1,'servo_1')>Send
                    </button>
                </td>
            </tr>
            <tr>
                <td colspan=4>
                    <span>
                        <br>
                    </span>
                </td>
            </tr>
            <tr>
                <td>D04
                    <span>Default 90<br>◀ 45
                        <input
                                type=range
                                id=range_6
                                min=45
                                max=135
                                value=90
                                onchange=controlServo(6,'range_6')>
                        135 ▶
                    </span>
                    <br>
                    <input
                            type=text
                            id=servo_6
                            value=90>
                    <button
                            type=button
                            style=background:#BFDFFF
                            onclick=controlServo(6,'servo_6')>Send
                    </button>
                </td>
                <td>D13
                    <span>Default 90<br>◀ 45
                        <input
                                type=range
                                id=range_2
                                min=45
                                max=135
                                value=90
                                onchange=controlServo(2,'range_2')>
                        135 ▶
                    </span>
                    <br>
                    <input
                            type=text
                            id=servo_2
                            value=90>
                    <button
                            type=button
                            style=background:#BFDFFF
                            onclick=controlServo(2,'servo_2')>Send
                    </button>
                </td>
            </tr>
            <tr>
                <td colspan=4>
                    <span>
                        <br>
                    </span>
                </td>
            </tr>
            <tr>
                <td>D02
                    <span>Default 70<br>⬇ 45
                        <input
                                type=range
                                id=range_7
                                min=45
                                max=135
                                value=70
                                onchange=controlServo(7,'range_7')>
                        135 ⬆
                    </span>
                    <br>
                    <input
                            type=text
                            id=servo_7
                            value=70>
                    <button
                            type=button
                            style=background:#FFE599
                            onclick=controlServo(7,'servo_7')>Send
                    </button>
                </td>
                <td>D15
                    <span>Default 110<br>⬆ 45
                        <input
                                type=range
                                id=range_3
                                min=45
                                max=135
                                value=110
                                onchange=controlServo(3,'range_3')>
                        135 ⬇
                    </span>
                    <br>
                    <input
                            type=text
                            id=servo_3
                            value=110>
                    <button
                            type=button
                            style=background:#FFE599
                            onclick=controlServo(3,'servo_3')>Send
                    </button>
                </td>
            </tr>
            <tr>
                <td colspan=4>
                    <br>
                    <span>Action Code:
                        <br>
                        <output id=actionCode></output>
                    </span>
                    </font>
                </td>
            </tr>
            <tr>
                <td colspan=4>
                    <span>
                        <br>
                    </span>
                </td>
            </tr>
            <tr>
                <td colspan=2>
                    <button
                            type=button
                            style=background:#FFCC99
                            onclick=controlPm(1)>Standby
                    </button>
                </td>
            </tr>
        </table>
        <div id=demo></div>
    </body>

    <script>
function controlServo(id, textId) {
    var xhttp = new XMLHttpRequest();
    var value = document.getElementById(textId).value;
    document.querySelector('#range_' + id).value = value;
    document.querySelector('#servo_' + id).value = value;
    actionCode();
    xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
            document.getElementById("demo").innerHTML = xhttp.responseText;
        }
    };
    xhttp.open("GET","controller?servo="+id+"&value="+value, true);
    xhttp.send();
}
function controlPm(value) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
            document.getElementById("demo").innerHTML = xhttp.responseText;
        }
    };
    xhttp.open("GET", "controller?pm="+value, true);
    xhttp.send();
}
function actionCode() {
    document.querySelector('#actionCode').value = document.getElementById('servo_0').value + ', ' + document.getElementById('servo_1').value + ', '
        + document.getElementById('servo_2').value + ', '
        + document.getElementById('servo_3').value + ', '
        + document.getElementById('servo_4').value + ', '
        + document.getElementById('servo_5').value + ', '
        + document.getElementById('servo_6').value + ', '
        + document.getElementById('servo_7').value;
}




    </script>
</html>